{% extends 'base.html' %}

{% block content %}
    <ul class="pagination">
        {% for p in per_pages %}
            <li class="{% if per_page==p %}active{% endif %} waves-effect"><a href="{{ url_for('articles', per_page=p, page=page, sort=sort, direction=direction) }}">{{ p }}</a></li>
        {% endfor %}
    </ul>
    {% include 'pages.html' %}

    <table class="highlight">
        <thead>
            <tr>
                <th>Agency</th>
                {# title #}
                <th {% if sort=='title' %}class="active"{% endif %}><a href="{{ url_for('articles', per_page=per_page, sort='title', direction='asc' if direction=='desc' else 'desc') }}">Title</a></th>
                {# date #}
                <th {% if sort=='date' %}class="active"{% endif %}><a href="{{ url_for('articles', per_page=per_page, sort='date', direction='asc' if direction=='desc' else 'desc') }}">Date</a></th>
                {# byline #}
                <th {% if sort=='byline' %}class="active"{% endif %}><a href="{{ url_for('articles', per_page=per_page, sort='byline', direction='asc' if direction=='desc' else 'desc') }}">Byline</a></th>
                {# pos #}
                <th {% if sort=='pos' %}class="active"{% endif %}><a href="{{ url_for('articles', per_page=per_page, sort='pos', direction='asc' if direction=='desc' else 'desc') }}">Positive</a></th>
                {# neg #}
                <th {% if sort=='neg' %}class="active"{% endif %}><a href="{{ url_for('articles', per_page=per_page, sort='neg', direction='asc' if direction=='desc' else 'desc') }}">Negative</a></th>
                {# neu #}
                <th {% if sort=='neu' %}class="active"{% endif %}><a href="{{ url_for('articles', per_page=per_page, sort='neu', direction='asc' if direction=='desc' else 'desc') }}">Neutral</a></th>
                {# compound #}
                <th {% if sort=='compound' %}class="active"{% endif %}><a href="{{ url_for('articles', per_page=per_page, sort='compound', direction='asc' if direction=='desc' else 'desc') }}">Compound</a></th>
                <th>Sentiment</th>
            </tr>
        </thead>
        <tbody>
            {% for article in articles %}
                <tr>
                    <td>{{ article.agency.name.upper() }}</td>
                    <td style="max-width: 20rem;"><a href="{{ article.url }}">{{ article.title }}</a></td>
                    <td>{{ article.date }}</td>
                    <td>{{ article.byline }}</td>
                    <td>{{ article.pos }}</td>
                    <td>{{ article.neg }}</td>
                    <td>{{ article.neu }}</td>
                    <td>{{ article.compound }}</td>
                    <td>{{ round(article.pos - article.neg, 4) }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    {% include 'pages.html' %}
{% endblock %}

