{% extends "base.html" %}

{% block content %}
    <h1>Today's articles &times;{{ count }} (total &times;{{ dbcount }})</h1>
    <h2 class="today" style="background-color: #{{ color(overall, [-10, 10]) }};">Today's Sentiment: {{ overall }}%</h2>
    <h2>key: [ sentiment (positive minus negative), neutrality, compound ]</h2>
    {% for agency in structure.keys() %}
        <h1 style="margin-top: 3rem; margin-bottom: 2rem;">
            <span class="agencyname" style="background-color: #{{ color(clamp(agency.sent, -10, 10), [-10,10]) }}"> {{ agency.name.upper() }}
            </span>
            today &times;{{ len(structure[agency]) }}
            [
            <span style="color: #{{ color(agency.sent) }}">{{ agency.sent }}%</span>,
            <span style="color: #{{ color(clamp(agency.neut, 70,100), [70,100], color1='808080', color2='0000FF') }}">{{ agency.neut }}%</span>
            ]
        </h1>
        <ol style="list-style-type: none;">
            {% for article in structure[agency] %}
                <li style="margin: 1rem">
                    <a style="padding: 0.25rem; color: white; background-color: #{{ article.color }}" href="{{ article.url }}">{{ article.title }}</a>
                    [
                    <span style="color: #{{ article.color }}">{{ article.sentiment }}%</span>,
                    <span style="color: #{{ article.neutrality_color }}">{{ article.neutrality }}%</span>,
                    <span style="color: #{{ article.compound_color }}">{{ article.comp }}%</span>
                    ]
                </li>
            {% endfor %}
        </ol>
    {% endfor %}
{% endblock %}
